{"version":3,"sources":["../../src/layer/sigmoid.js"],"names":["predict","compare","Sigmoid","inputLayer","width","height","validate","weights","deltas","predictKernel","output","functions","compareKernel","previousLayer","nextLayer","inputs","thread","y","x","weight","delta"],"mappings":";;;;;;;;QAuCgBA,O,GAAAA,O;QAIAC,O,GAAAA,O;;AA3ChB;;AACA;;;;AACA;;AACA;;;;;;;;;;;;IAEqBC,O;;;AACnB,mBAAYC,UAAZ,EAAwB;AAAA;;AAAA;;AAEtB,UAAKA,UAAL,GAAkBA,UAAlB;;AAFsB,QAIdC,KAJc,GAIID,UAJJ,CAIdC,KAJc;AAAA,QAIPC,MAJO,GAIIF,UAJJ,CAIPE,MAJO;;AAKtB,UAAKD,KAAL,GAAaA,KAAb;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKC,QAAL;AACA,UAAKC,OAAL,GAAe,uBAAQ,MAAKH,KAAb,EAAoB,MAAKC,MAAzB,CAAf;AACA,UAAKG,MAAL,GAAc,uBAAQ,MAAKJ,KAAb,EAAoB,MAAKC,MAAzB,CAAd;AATsB;AAUvB;;;;mCAEc;AACb,WAAKI,aAAL,GAAqB,0BAAWT,OAAX,EAAoB;AACvCU,gBAAQ,CAAC,KAAKN,KAAN,EAAa,KAAKC,MAAlB,CAD+B;AAEvCM,mBAAW;AAF4B,OAApB,CAArB;;AAKA,WAAKC,aAAL,GAAqB,0BAAWX,OAAX,EAAoB;AACvCS,gBAAQ,CAAC,KAAKN,KAAN,EAAa,KAAKC,MAAlB,CAD+B;AAEvCM,mBAAW;AAF4B,OAApB,CAArB;AAID;;;8BAES;AACR,WAAKJ,OAAL,GAAe,KAAKE,aAAL,CAAmB,KAAKN,UAAL,CAAgBI,OAAnC,CAAf;AACD;;;4BAEOM,a,EAAeC,S,EAAW;AAChC,WAAKX,UAAL,CAAgBK,MAAhB,GAAyB,KAAKI,aAAL,CAAmB,KAAKL,OAAxB,EAAiC,KAAKC,MAAtC,CAAzB;AACD;;;;;;kBA/BkBN,O;AAkCd,SAASF,OAAT,CAAiBe,MAAjB,EAAyB;AAC9B,SAAO,uBAASA,OAAO,KAAKC,MAAL,CAAYC,CAAnB,EAAsB,KAAKD,MAAL,CAAYE,CAAlC,CAAT,CAAP;AACD;;AAEM,SAASjB,OAAT,CAAiBM,OAAjB,EAA0BC,MAA1B,EAAkC;AACvC,MAAIW,SAASZ,QAAQ,KAAKS,MAAL,CAAYC,CAApB,EAAuB,KAAKD,MAAL,CAAYE,CAAnC,CAAb;AACA,MAAIE,QAAQZ,OAAO,KAAKQ,MAAL,CAAYC,CAAnB,EAAsB,KAAKD,MAAL,CAAYE,CAAlC,CAAZ;AACA,SAAO,sBAAQC,MAAR,EAAgBC,KAAhB,CAAP;AACD","file":"sigmoid.js","sourcesContent":["import { Activation } from './types';\nimport makeKernel from '../utilities/make-kernel';\nimport { activate, measure } from '../activation/sigmoid';\nimport zeros2D from '../utilities/zeros-2d';\n\nexport default class Sigmoid extends Activation {\n  constructor(inputLayer) {\n    super();\n    this.inputLayer = inputLayer;\n\n    const { width, height } = inputLayer;\n    this.width = width;\n    this.height = height;\n    this.validate();\n    this.weights = zeros2D(this.width, this.height);\n    this.deltas = zeros2D(this.width, this.height);\n  }\n\n  setupKernels() {\n    this.predictKernel = makeKernel(predict, {\n      output: [this.width, this.height],\n      functions: [activate]\n    });\n\n    this.compareKernel = makeKernel(compare, {\n      output: [this.width, this.height],\n      functions: [measure]\n    });\n  }\n\n  predict() {\n    this.weights = this.predictKernel(this.inputLayer.weights);\n  }\n\n  compare(previousLayer, nextLayer) {\n    this.inputLayer.deltas = this.compareKernel(this.weights, this.deltas);\n  }\n}\n\nexport function predict(inputs) {\n  return activate(inputs[this.thread.y][this.thread.x]);\n}\n\nexport function compare(weights, deltas) {\n  let weight = weights[this.thread.y][this.thread.x];\n  let delta = deltas[this.thread.y][this.thread.x];\n  return measure(weight, delta);\n}"]}